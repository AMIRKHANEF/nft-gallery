<!-- sandbox.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sandbox</title>
</head>

<body>
    <script>
        window.addEventListener('message', (event) => {
            if (event.origin !== window.location.origin) {
                return;
            }

            try {
                const resources = JSON.parse(event.data);
                resources.forEach(({ type, location, src }) => {
                    const parent = location === 'head' ? document.head : document.body;
                    const tag = document.createElement(type === 'script' ? 'script' : 'link');
                    if (type === 'script') {
                        tag.src = src;
                    } else if (type === 'style') {
                        tag.rel = 'stylesheet';
                        tag.href = src;
                    }
                    parent.appendChild(tag);
                });
            } catch (error) {
                console.error('Error handling message:', error);
            }
        });
    </script>


</html>